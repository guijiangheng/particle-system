!function(t){var i={};function s(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=i,s.d=function(t,i,n){s.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,i){if(1&i&&(t=s(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)s.d(n,o,function(i){return t[i]}.bind(null,o));return n},s.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},s.p="",s(s.s=1)}([,function(t,i,s){"use strict";s.r(i);var n=s(3);class o{constructor(t=new n.a,i=t){this.position=t,this.prevPosition=i}distance(t){return this.position.distance(t.position)}getVelocity(){return this.position.sub(this.prevPosition)}setVelocity(t){this.prevPosition=this.position.sub(t)}}var r=s(2);class e{constructor(){this.particles=[],this.constraints=[]}pin(t){return this.constraints.push(new r.e(this.particles[t])),this}applyConstraint(){for(const t of this.constraints)t.applyConstraint()}getIndexBuffer(){return null}getPositionBuffer(){return this.positionBuffer=new Float32Array(3*this.particles.length),this.updatePositionBuffer(),this.positionBuffer}updatePositionBuffer(){let t=0;for(const i of this.particles)this.positionBuffer[t]=i.position.x,this.positionBuffer[t+1]=i.position.y,this.positionBuffer[t+2]=i.position.z,t+=3}}class c extends e{constructor(t){super(),this.particles.push(new o(t))}}class u extends e{constructor(t,i,s,n){super();const e=s-1,c=i.sub(t).divide(e);for(let i=0;i<s;++i)this.particles.push(new o(t.add(c.multiply(i))));for(let t=0;t<e;++t)this.constraints.push(new r.d(this.particles[t],this.particles[t+1],n/e))}pinFirst(){return this.pin(0)}pinLast(){return this.pin(this.particles.length-1)}getIndexBuffer(){const t=[],i=this.particles.length-1;for(let s=0;s<i;++s)t.push(s,s+1);return new Uint32Array(t)}}class a{applyForce(){throw new Error("subclass must override this method")}}class p extends a{constructor(t){super(),this.force=t}applyForce(t){t.position=t.position.add(this.force)}}class h{constructor(t){this.friction=1,this.iterations=t,this.forces=[],this.constraints=[],this.composites=[]}addComposite(t){this.composites.push(t)}addForce(t){this.forces.push(t)}addConstraint(t){this.constraints.push(t)}updatePositions(){for(const t of this.composites)for(const i of t.particles){const t=i.getVelocity().multiply(this.friction);i.prevPosition=i.position,i.position=i.position.add(t);for(const t of this.forces)t.applyForce(i)}}applyConstraints(){for(const t of this.composites)t.applyConstraint();for(const t of this.composites)for(const i of t.particles)for(const t of this.constraints)t.applyConstraint(i)}updatePositionBuffer(){for(const t of this.composites)t.updatePositionBuffer()}update(){this.updatePositions();for(let t=0;t<this.iterations;++t)this.applyConstraints();this.updatePositionBuffer()}}s.d(i,"Vector3",function(){return n.a}),s.d(i,"Particle",function(){return o}),s.d(i,"Composite",function(){return e}),s.d(i,"Point",function(){return c}),s.d(i,"Line",function(){return u}),s.d(i,"Force",function(){return a}),s.d(i,"DirectionalForce",function(){return p}),s.d(i,"Constraint",function(){return r.c}),s.d(i,"PinConstraint",function(){return r.e}),s.d(i,"BoxConstraint",function(){return r.b}),s.d(i,"DistanceConstraint",function(){return r.d}),s.d(i,"ParticleSystem",function(){return h})},function(t,i,s){"use strict";s.d(i,"c",function(){return o}),s.d(i,"e",function(){return r}),s.d(i,"b",function(){return e}),s.d(i,"d",function(){return c}),s.d(i,"a",function(){return u});var n=s(3);class o{applyConstraint(){throw new Error("subclass must override this method")}}class r extends o{constructor(t,i){super(),this.particle=t,this.position=void 0===i?t.position.clone():i}applyConstraint(){this.particle.position=this.position.clone()}}class e extends o{constructor(t,i,s=1){super(),this.pMin=t,this.pMax=i,this.bounceFriction=s}applyConstraint(t){const i=t.getVelocity();for(const s of["x","y","z"])t.position[s]<this.pMin[s]?(t.position[s]=this.pMin[s],t.prevPosition[s]=this.pMin[s]+i[s]*this.bounceFriction):t.position[s]>this.pMax[s]&&(t.position[s]=this.pMax[s],t.prevPosition[s]=this.pMax[s]+i[s]*this.bounceFriction)}}class c extends o{constructor(t,i,s,n){super(),this.particleA=t,this.particleB=i,this.setDistance(s,n)}setDistance(t,i){this.minDistance=void 0===t?this.particleA.position.distance(this.particleB.position):t,this.maxDistance=void 0===i?this.minDistance:i}applyConstraint(){const{minDistance:t,maxDistance:i,particleA:s,particleB:o}=this;let r=s.position.sub(o.position),e=r.length();if(e<i&&e>t)return;e<1e-4&&(r=new n.a(.1,0,0),e=.1);const c=((e<t?t:i)-e)/e/2,u=r.multiply(c);s.position=s.position.add(u),o.position=o.position.sub(u)}}class u extends o{constructor(t,i,s){super(),this.startPoint=t,this.endPoint=i,this.particle=s,this.abNorm=this.endPoint.sub(this.startPoint).normalize()}applyConstraint(){const{abNorm:t,particle:i,startPoint:s}=this,n=i.position.sub(s).dot(t),o=t.multiply(n);i.position=s.add(o)}}},function(t,i,s){"use strict";s.d(i,"a",function(){return n});class n{constructor(t=0,i=0,s=0){this.x=t,this.y=i,this.z=s}add(t){return new n(this.x+t.x,this.y+t.y,this.z+t.z)}sub(t){return new n(this.x-t.x,this.y-t.y,this.z-t.z)}multiply(t){return new n(this.x*t,this.y*t,this.z*t)}divide(t){return this.multiply(1/t)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.lengthSquared())}distanceSquared(t){return this.sub(t).lengthSquared()}distance(t){return this.sub(t).length()}normalize(){return this.divide(this.length())}clone(){return new n(this.x,this.y,this.z)}}}]);